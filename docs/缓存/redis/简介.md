### 什么是Redis
简单来说 redis 就是⼀个数据库，不过与传统数据库不同的是 redis 的数据是存在内存中的，所以读
写速度⾮常快，因此 redis 被⼴泛应⽤于缓存⽅向。另外，redis 也经常⽤来做分布式锁。redis 提
供了多种数据类型来⽀持不同的业务场景。除此之外，redis ⽀持事务 、持久化、LUA脚本、LRU驱动
事件、多种集群⽅案。

### 为什么要⽤redis/为什么要⽤缓存
主要从`⾼性能`和`⾼并发`这两点来看待这个问题
#### ⾼性能
假如⽤户第⼀次访问数据库中的某些数据。这个过程会⽐᫾慢，因为是从硬盘上读取的。将该⽤户访问
的数据存在缓存中，这样下⼀次再访问这些数据的时候就可以直接从缓存中获取了。操作缓存就是直接
操作内存，所以速度相当快。如果数据库中的对应数据改变的之后，同步改变缓存中相应的数据即可！

#### 高并发
直接操作缓存能够承受的请求是远远⼤于直接访问数据库的(redis单机请求最大可达到百万级的并发)，所以我们可以考虑把数据库中的部分数据
转移到缓存中去，这样⽤户的⼀部分请求会直接到缓存这⾥⽽不⽤经过数据库。

### 为什么要用redis而不用map做缓存？
- Redis 可以用几十 G 内存来做缓存，Map 不行
- Redis 的缓存可以持久化，Map 是内存对象，程序一重启数据就没了
- Redis 可以实现分布式的缓存，Map 只能存在创建它的程序里
    - 缓存分为本地缓存和分布式缓存。map最主要的特点是轻量以及快速，生命周期随着应用程序的销毁而结束，并且在多实例的情况下，每个实例都需要各自保存一份缓存，缓存不具有一致性。
    - 使用redis或memcached之类的称为分布式缓存，在多实例的情况下，各实例共用一份缓存数据，缓存具有一致性。缺点是需要保持redis或memcached服务的高可用，整个程序架构上较为复杂。

- Redis 可以处理每秒百万级的并发，是专业的缓存服务，Map 只是一个普通的数据结构
- Redis 缓存有过期机制，Map 本身无此功能
- Redis 有丰富的 API，Map 就简单太多了

### Redis的线程模型
Redis4.0版本之前是完全的单线程模型，之后的版本中引入了多线程，不过也只是在部分命令上引入的，其中包括非阻塞的删除操作（UNLINK、FLUSHALL ASYNC、FLUSHDB ASYNC 等），在整体的架构设计上，主处理程序还是单线程模型的。
I/O 多路复用的主要作用是让我们可以使用一个线程来监控多个连接是否可读或者可写，但是从网络另一头发的数据包需要先解序列化成 Redis 内部其他模块可以理解的命令，这个过程就是 Redis 6.0 引入多线程来并发处理的。
I/O 多路复用模块收到数据包之后将其丢给后面多个 I/O 线程进行解析，I/O 线程处理结束后，主线程会负责串行的执行这些命令，由于向客户端发回数据包的过程也是比较耗时的，所以执行之后的结果也会交给多个 I/O 线程发送回客户端。


### 为啥 redis 单线程模型也能效率这么高？
- 它使用 I/O 多路复用机制同时监听多个文件描述符的可读和可写状态，一旦收到网络请求就会在内存中快速处理，由于绝大多数的操作都是纯内存的，所以处理的速度会非常地快。
- 主处理程序是单线程的，反而避免了多线程的频繁上下文切换问题

### redis 和 memcached 的区别
- redis⽀持更丰富的数据类型（⽀持更复杂的应⽤场景）：Redis不仅仅⽀持简单的k/v类型的数据，同时还提供list，set，zset，hash等数据结构的存储。memcache⽀持简单的数据类型String，二进制类型。
- Redis⽀持数据的持久化，可以将内存中的数据保持在磁盘中，重启的时候可以再次加载进⾏使⽤,⽽Memecache把数据全部存在内存之中。
- 集群模式：memcached没有原⽣的集群模式，需要依靠客户端来实现往集群中分⽚写⼊数据；但是 redis ⽬前是原⽣⽀持 cluster 模式的.
- Memcached是多线程；Redis使⽤单线程。
